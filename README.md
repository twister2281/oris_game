# Maze Race - Сетевая игра "Гонка в лабиринте"

Сетевая игра на Java с использованием Swing, где два игрока соревнуются на время, чтобы первыми дойти до выхода из лабиринта.

## Описание

**Maze Race** - это соревновательная игра на время, где два игрока одновременно пытаются первыми дойти до выхода из лабиринта. Каждый игрок видит только свою часть карты (окружение вокруг персонажа), а анимированный компас показывает направление к выходу.

### Особенности:
- Сетевое взаимодействие через сокеты (Server-Client архитектура)
- Многопоточность для разделения UI и сетевого взаимодействия
- Анимированный компас с плавным вращением стрелки
- Рисование игрового поля с использованием Graphics2D
- Собственный протокол передачи данных (5 типов сообщений)
- Генерация лабиринта с использованием алгоритма рекурсивного backtracking

## Требования

- Java 8 или выше
- JDK для компиляции

## Сборка и запуск

### Компиляция:
```bash
javac -d bin -sourcepath src/main/java src/main/java/game/Main.java
```

### Запуск:
```bash
java -cp bin game.Main
```

При запуске программа предложит выбрать режим:
- **Server** - запустить как сервер (первый игрок)
- **Client** - подключиться к серверу (второй игрок)

Для клиента потребуется ввести адрес сервера (по умолчанию `localhost`).

## Управление

- **Стрелки** или **WASD** - движение персонажа
- Цель: первым дойти до выхода (золотая точка в центре лабиринта)

## Архитектура

### Сетевой протокол

Протокол использует текстовый формат с разделителем `|`. Типы сообщений:

1. **PLAYER_POSITION** - обновление позиции игрока
   - Формат: `POSITION|playerId|x|y|direction`

2. **GAME_START** - начало игры
   - Формат: `START|playerId|mazeSeed|startX|startY|exitX|exitY`

3. **GAME_END** - окончание игры
   - Формат: `END|winnerId|time`

4. **PLAYER_MOVE** - движение игрока
   - Формат: `MOVE|playerId|direction`

5. **SYNC_REQUEST** - запрос синхронизации состояния
   - Формат: `SYNC|playerId`

### Структура проекта

```
src/main/java/game/
├── Main.java                 # Точка входа
├── server/
│   ├── GameServer.java       # Сервер
│   └── ClientHandler.java    # Обработчик клиента
├── client/
│   └── GameClient.java       # Клиент
├── protocol/
│   ├── Message.java          # Базовый класс сообщения
│   ├── MessageType.java      # Типы сообщений
│   └── ProtocolParser.java   # Парсер протокола
├── model/
│   ├── Maze.java             # Генерация лабиринта
│   ├── Player.java           # Модель игрока
│   └── GameState.java        # Состояние игры
├── ui/
│   ├── GameWindow.java       # Главное окно
│   ├── GamePanel.java        # Панель с игрой (рисование)
│   ├── CompassPanel.java     # Панель с компасом
│   └── InfoPanel.java        # Панель с информацией
└── utils/
    └── Constants.java        # Константы
```

## Технические детали

- **GUI**: Java Swing
- **Сеть**: Java Sockets
- **Рисование**: Graphics2D с антиалиасингом
- **Анимация**: Timer для плавного вращения компаса
- **Многопоточность**: Отдельные потоки для сервера, клиента и UI

## Авторы

Семестровая работа по курсу "Основы разработки ИС"
